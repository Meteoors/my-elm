{"version":3,"sources":["webpack:///./src/page/search/search.vue?5abe","webpack:///src/page/search/search.vue","webpack:///./src/page/search/search.vue"],"names":["esExports","render","_vm","this","_h","$createElement","_c","_self","attrs","id","headTitle","goBack","_v","staticClass","directives","name","rawName","value","expression","type","placeholder","domProps","on","input","$event","target","composing","searchValue","checkInput","click","preventDefault","search","shoplist","_l","shop","index","key","to","path","query","geohash","tag","src","imgBaseUrl","image_path","_s","xmlns","version","width","height","staticStyle","fill","stroke","stroke-width","points","x1","y1","x2","y2","font-size","font-weight","x","y","recent_order_num","float_minimum_order_amount","distance","activities","activity","style","backgroundColor","icon_color","icon_name","_e","searchList","length","showHistory","history","stopPropagation","deleteHistory","clearAll","parent","staticRenderFns","__webpack_exports__","__webpack_require__","_getData","_mUtils","_env","data","emptyResult","created","$route","params","getStore","JSON","parse","components","headTop","_header2","default","footGuide","_footer2","methods","val","_this","_asyncToGenerator3","_regenerator2","mark","_callee","repeat","wrap","_context","prev","next","abrupt","searchRestaurant","sent","forEach","push","setStore","stop","splice","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_search_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_search_vue___default","n","__WEBPACK_IMPORT_KEY__","d","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0b0daa2b_hasScoped_true_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_search_vue__","__vue_styles__","ssrContext","Component","normalizeComponent","a"],"mappings":"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","file":"static/js/14.648ca2c257d1f638709c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"search\"}},[_c('head-top',{attrs:{\"headTitle\":\"搜索\",\"goBack\":\"true\"}}),_vm._v(\" \"),_c('form',{staticClass:\"search_form\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchValue),expression:\"searchValue\"}],staticClass:\"search_text\",attrs:{\"type\":\"search\",\"name\":\"search\",\"placeholder\":\"请输入商家或美食名称\"},domProps:{\"value\":(_vm.searchValue)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.searchValue=$event.target.value},_vm.checkInput]}}),_vm._v(\" \"),_c('input',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"name\":\"submit\",\"value\":\"提交\"},on:{\"click\":function($event){$event.preventDefault();_vm.search(_vm.searchValue)}}})]),_vm._v(\" \"),(_vm.shoplist.length)?_c('div',{staticClass:\"seller\"},[_c('h4',{staticClass:\"title\"},[_vm._v(\"商家\")]),_vm._v(\" \"),_c('ul',{staticClass:\"shop_ul\"},_vm._l((_vm.shoplist),function(shop,index){return _c('router-link',{key:index,staticClass:\"shop\",attrs:{\"to\":{path:'/shop', query:{geohash: _vm.geohash, id:shop.id}},\"tag\":\"li\"}},[_c('div',{staticClass:\"avator\"},[_c('img',{attrs:{\"src\":_vm.imgBaseUrl + shop.image_path}})]),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"detail\"},[_c('p',{staticClass:\"shop_title\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(shop.name))]),_vm._v(\" \"),_c('svg',{staticClass:\"pay_icon\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"version\":\"1.1\",\"width\":\"24\",\"height\":\"13\"}},[_c('polygon',{staticStyle:{\"fill\":\"none\",\"stroke\":\"#FF6000\",\"stroke-width\":\"1\"},attrs:{\"points\":\"0,14 4,0 24,0 20,14\"}}),_vm._v(\" \"),_c('line',{staticStyle:{\"stroke\":\"#FF6000\",\"stroke-width\":\"1.5\"},attrs:{\"x1\":\"1.5\",\"y1\":\"12\",\"x2\":\"20\",\"y2\":\"12\"}}),_vm._v(\" \"),_c('text',{staticStyle:{\"fill\":\"#FF6000\",\"font-size\":\"9\",\"font-weight\":\"bold\"},attrs:{\"x\":\"3.5\",\"y\":\"9\"}},[_vm._v(\"支付\")])])]),_vm._v(\" \"),_c('p',{staticClass:\"count\"},[_vm._v(\"月售\"+_vm._s(shop.recent_order_num)+\"单\")]),_vm._v(\" \"),_c('p',{staticClass:\"delivery\"},[_vm._v(\"\\n                            \"+_vm._s(shop.float_minimum_order_amount)+\" 元起送 / 距离\"+_vm._s(shop.distance)+\"\\n                        \")])]),_vm._v(\" \"),(shop.activities.length)?_c('ul',{staticClass:\"activities\"},_vm._l((shop.activities),function(activity,index){return _c('li',{key:index,staticClass:\"activity\"},[_c('span',{staticClass:\"icon\",style:({backgroundColor: '#' + activity.icon_color})},[_vm._v(\"\\n                                \"+_vm._s(activity.icon_name)+\"\\n                            \")]),_vm._v(\" \"),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(activity.name))]),_vm._v(\" \"),_c('span',{staticClass:\"only_phone\"},[_vm._v(\"(手机客户端专享)\")])])})):_vm._e()])])}))]):_vm._e(),_vm._v(\" \"),(_vm.searchList.length&&_vm.showHistory)?_c('div',{staticClass:\"history\"},[_c('h4',{staticClass:\"title\"},[_vm._v(\"搜索历史\")]),_vm._v(\" \"),_c('ul',{staticClass:\"history_ul\"},_vm._l((_vm.searchList),function(history,index){return _c('li',{key:index,staticClass:\"history_li\",on:{\"click\":function($event){_vm.search(history)}}},[_c('span',{staticClass:\"text ellipsis\"},[_vm._v(_vm._s(history))]),_vm._v(\" \"),_c('svg',{staticClass:\"delete_icon\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"version\":\"1.1\"},on:{\"click\":function($event){$event.stopPropagation();_vm.deleteHistory(index)}}},[_c('line',{staticStyle:{\"stroke\":\"#999\",\"stroke-width\":\"3\"},attrs:{\"x1\":\"8\",\"y1\":\"8\",\"x2\":\"18\",\"y2\":\"18\"}}),_vm._v(\" \"),_c('line',{staticStyle:{\"stroke\":\"#999\",\"stroke-width\":\"3\"},attrs:{\"x1\":\"18\",\"y1\":\"8\",\"x2\":\"8\",\"y2\":\"18\"}})])])})),_vm._v(\" \"),_c('div',{staticClass:\"clear_history\",on:{\"click\":_vm.clearAll}},[_vm._v(\"清空搜索历史\")])]):_vm._e(),_vm._v(\" \"),(_vm.emptyResult)?_c('div',{staticClass:\"none\"},[_vm._v(\"很抱歉！无搜索结果\")]):_vm._e(),_vm._v(\" \"),_c('foot-guide',{attrs:{\"parent\":\"search\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0b0daa2b\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/search/search.vue\n// module id = 91uL\n// module chunks = 14","<template>\r\n    <div id='search'>\r\n        <head-top headTitle='搜索' goBack='true'></head-top>\r\n\r\n        <form class='search_form'>\r\n            <input type=\"search\" name='search' class='search_text' placeholder=\"请输入商家或美食名称\" v-model='searchValue' @input='checkInput'>\r\n            <input type=\"submit\" name='submit' class='submit' value='提交' @click.prevent='search(searchValue)'>\r\n        </form>\r\n\r\n        <div class='seller' v-if='shoplist.length'>\r\n            <h4 class='title'>商家</h4>\r\n            <ul class='shop_ul'>\r\n                <router-link class='shop' :to=\"{path:'/shop', query:{geohash, id:shop.id}}\" v-for='(shop, index) in shoplist' :key='index' tag='li'>\r\n                    <div class='avator'>\r\n                        <img :src=\"imgBaseUrl + shop.image_path\">\r\n                    </div>\r\n                    <div class='right'>\r\n                        <div class='detail'>\r\n                            <p class='shop_title'>\r\n                                <span class='name'>{{shop.name}}</span>\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"13\" class=\"pay_icon\">\r\n                                    <polygon points=\"0,14 4,0 24,0 20,14\" style=\"fill:none;stroke:#FF6000;stroke-width:1\" />\r\n                                    <line x1=\"1.5\" y1=\"12\" x2=\"20\" y2=\"12\" style=\"stroke:#FF6000;stroke-width:1.5\"/>\r\n                                    <text x=\"3.5\" y=\"9\" style=\"fill:#FF6000;font-size:9;font-weight:bold;\">支付</text>\r\n                                </svg>\r\n                            </p>\r\n                            <p class='count'>月售{{shop.recent_order_num}}单</p>\r\n                            <p class='delivery'>\r\n                                {{shop.float_minimum_order_amount}} 元起送 / 距离{{shop.distance}}\r\n                            </p>\r\n                        </div>\r\n                        <ul class='activities' v-if='shop.activities.length'>\r\n                            <li class='activity' v-for='(activity, index) in shop.activities' :key='index'>\r\n                                <span class='icon' :style=\"{backgroundColor: '#' + activity.icon_color}\">\r\n                                    {{activity.icon_name}}\r\n                                </span>\r\n                                <span class='name'>{{activity.name}}</span>\r\n                                <span class='only_phone'>(手机客户端专享)</span>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </router-link>\r\n            </ul>\r\n        </div>\r\n\r\n        <div class='history' v-if='searchList.length&&showHistory'>\r\n            <h4 class='title'>搜索历史</h4>\r\n            <ul class='history_ul'>\r\n                <li class='history_li' v-for='(history, index) in searchList' :key='index' @click='search(history)'>\r\n                    <span class='text ellipsis'>{{history}}</span>\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" class=\"delete_icon\" @click.stop=\"deleteHistory(index)\">\r\n                        <line x1=\"8\" y1=\"8\" x2=\"18\" y2=\"18\" style=\"stroke:#999;stroke-width:3\" />\r\n                        <line x1=\"18\" y1=\"8\" x2=\"8\" y2=\"18\" style=\"stroke:#999;stroke-width:3\" />\r\n                    </svg>\r\n                </li>\r\n            </ul>\r\n            <div class='clear_history' @click=\"clearAll\">清空搜索历史</div>\r\n        </div>\r\n\r\n        <div class='none' v-if='emptyResult'>很抱歉！无搜索结果</div>\r\n\r\n        <foot-guide parent='search'></foot-guide>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import headTop from '../../components/head/header'\r\n    import footGuide from '../../components/foot/footer'\r\n    import {searchRestaurant} from '../../service/getData'\r\n    import {getStore, setStore} from '../../config/mUtils'\r\n    import {imgBaseUrl} from '../../config/env';\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                geohash: '',\r\n                searchValue: '',\r\n                searchList: [],\r\n                showHistory: true,\r\n                shoplist: [],\r\n                emptyResult: false,\r\n                imgBaseUrl\r\n            }\r\n        },\r\n        created () {\r\n            //从url中取得geohash\r\n            this.geohash = this.$route.params.geohash;  \r\n\r\n            //从localStorage中取得搜索历史记录\r\n            if(getStore('searchHistory')){\r\n                this.searchList = JSON.parse(getStore('searchHistory'));\r\n            }\r\n        },\r\n        components: {\r\n            headTop,\r\n            footGuide\r\n        },\r\n        methods: {\r\n            //搜索结束后，删除搜索内容直到为空时，清空搜索结果并显示历史记录\r\n            checkInput() {\r\n                if(this.searchValue == ''){\r\n                    this.shoplist = [];\r\n                    this.showHistory = true;\r\n                    this.emptyResult = false;\r\n                }\r\n            },\r\n            //点击提交按钮，搜索结果并显示，同时将搜索内容存入历史记录\r\n            async search(val) {\r\n                if (!val) return;\r\n                this.searchValue = val;\r\n                this.showHistory = false; //隐藏搜索历史\r\n\r\n                this.shoplist = await searchRestaurant(this.geohash, val);  //获取搜索结果\r\n                this.emptyResult = !this.shoplist.length;    //当搜索结果为空时，显示提示信息\r\n\r\n                //将搜索历史存入localStorage\r\n                if (this.searchList.length) {\r\n                    let repeat = false;\r\n                    this.searchList.forEach(history => {\r\n                        if (val == history) {\r\n                            repeat = true;\r\n                        }\r\n                    });\r\n                    if (!repeat) {\r\n                        this.searchList.push(val);\r\n                    }\r\n                }else{\r\n                    this.searchList.push(val);\r\n                }\r\n\r\n                setStore('searchHistory', this.searchList);\r\n            },\r\n            //删除当前搜索历史\r\n            deleteHistory(index) {  \r\n                this.searchList.splice(index, 1);\r\n                setStore('searchHistory', this.searchList);\r\n            },\r\n            //清空搜索历史\r\n            clearAll() {   \r\n                this.searchList = [];\r\n                setStore('searchHistory', this.searchList);\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang='scss' scoped>\r\n    @import '../../style/mixin';\r\n\r\n    #search{\r\n        padding-top: 1.9rem;\r\n        padding-bottom: 2rem;\r\n        .search_form{\r\n            background: #fff;\r\n            padding: .5rem;\r\n            display: flex;\r\n            input{\r\n                height: 1.5rem;\r\n                border-radius: .125rem;\r\n                font-weight: 700;\r\n                font-size: .65rem;\r\n            }\r\n            .search_text{\r\n                flex: 4;\r\n                background: #f2f2f2;\r\n                border: 1px solid $bc;\r\n                text-indent: 0.2rem;\r\n                color: #333;\r\n            }\r\n            .submit{\r\n                flex: 1;\r\n                background: $blue;\r\n                color:#fff;\r\n                margin-left: .2rem;\r\n            }\r\n        }\r\n\r\n        .seller{\r\n            background: #fff;\r\n            .title{\r\n                background: #f2f2f2;\r\n                height: 2rem;\r\n                line-height: 2rem;\r\n                font-size: .7rem;\r\n                text-indent: .5rem;\r\n                // font-weight: 700;\r\n                color: #666;\r\n            }\r\n            .shop_ul{\r\n                .shop{\r\n                    display: flex;\r\n                    border-bottom: 1px solid $bc;\r\n                    padding: .5rem;\r\n                    .avator{\r\n                        img{\r\n                            width: 1.8rem;\r\n                            height: 1.8rem\r\n                        }\r\n                    }\r\n                    .right{\r\n                        color: #666;\r\n                        flex: 1;\r\n                        .detail{\r\n                            margin-top: -.2rem;\r\n                            padding-bottom: .2rem;\r\n                            font-size: .6rem; \r\n                            transform: scale(.95);\r\n                            border-bottom: 1px solid $bc;\r\n                            p{\r\n                                line-height: .6rem;\r\n                                padding: .2rem 0;\r\n                            }\r\n                            .shop_title{\r\n                                .pay_icon{\r\n                                    margin-bottom: -1px;\r\n                                    // transform: scale(.9);\r\n                                }\r\n                            }\r\n                        }\r\n                        .activities{\r\n                            padding: .3rem 0 .1rem;  \r\n                            li{\r\n                                transform: scale(.85);\r\n                                margin-left: -.7rem;\r\n                                font-size:0;\r\n                                span{\r\n                                    font-size: .6rem;\r\n                                    line-height: .6rem;\r\n                                    display: inline-block;\r\n                                    vertical-align: middle;\r\n                                }\r\n                                .icon{\r\n                                    @include sc(.6rem, #fff);\r\n                                    padding: 0 2px;\r\n                                    border-radius: .15rem;\r\n                                    margin-right: .125rem;\r\n                                    height: .8rem;\r\n                                    line-height: .8rem;\r\n                                }\r\n                                .only_phone{\r\n                                    color: #ff6000;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        .history{\r\n            background: #fff;\r\n            .title{\r\n                background: #f2f2f2;\r\n                height: 2rem;\r\n                line-height: 2rem;\r\n                font-size: .6rem;\r\n                text-indent: .5rem;\r\n                font-weight: 700;\r\n                color: #666;\r\n            }\r\n            .history_ul{\r\n                li{\r\n                    @include font(0.7rem, 2rem);\r\n                    border-bottom: .025rem solid $bc;\r\n                    display: flex;\r\n                    padding: 0 .3rem;\r\n                    justify-content: space-between;\r\n                    align-items: center;\r\n                    .text{\r\n                        width: 80%;\r\n                    }\r\n                    .delete_icon{\r\n                        height: 20px;\r\n                        width: 20px;\r\n                    }\r\n                }\r\n            }\r\n            .clear_history{\r\n                height: 2rem;\r\n                line-height: 2rem;\r\n                text-align: center;\r\n                color: $blue;\r\n                font-size: .7rem;\r\n                font-weight: 700;\r\n            }\r\n        }\r\n\r\n        .none{\r\n            margin-top: .125rem;\r\n            text-align: center;\r\n            background: #fff;\r\n            color: #333;\r\n            @include font(0.65rem, 1.75rem);\r\n        }\r\n    }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/page/search/search.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0b0daa2b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./search.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0b0daa2b\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0b0daa2b\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/search/search.vue\n// module id = vCr1\n// module chunks = 14"],"sourceRoot":""}