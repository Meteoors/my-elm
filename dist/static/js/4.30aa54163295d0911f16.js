webpackJsonp([4],{"/CM7":function(t,s){},"1HZs":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=d(e("Xxa5")),a=d(e("exGp")),o=d(e("Dd8w")),r=d(e("vGpu")),n=d(e("RA/b")),c=e("NYxO"),l=e("i84Q"),u=e("we8T");function d(t){return t&&t.__esModule?t:{default:t}}s.default={data:function(){return{headTitle:"",sortBy:"",foodTitle:"",category:[],categoryDetail:[],activity:[],delivery:[],restaurant_category_id:"",restaurant_category_ids:"",sortByType:"",delivery_mode:"",supports_ids:"",filterNum:0,confirmStatus:!1}},created:function(){this.init()},computed:(0,o.default)({},(0,c.mapState)(["latitude","longitude","categoryData"])),components:{headTop:r.default,shopList:n.default},mixins:[u.getImgPath],methods:{init:function(){var t=this;return(0,a.default)(i.default.mark(function s(){var e;return i.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.restaurant_category_id=t.categoryData.restaurant_category_id,t.restaurant_category_ids=t.categoryData.restaurant_category_ids,t.sortByType=t.categoryData.sortBytype,t.delivery_mode=t.categoryData.delivery_mode,t.supports_ids=t.categoryData.supports_ids,t.headTitle=t.$route.query.title,t.foodTitle=t.headTitle,s.next=9,(0,l.foodCategory)(t.latitude,t.longitude);case 9:return(e=s.sent).forEach(function(t,s,e){if("全部商家"==t.name){var i=e.splice(s,1);e.unshift(i[0])}}),t.category=e,t.category.forEach(function(s){t.restaurant_category_id==s.id&&(t.categoryDetail=s.sub_categories)}),s.next=15,(0,l.foodDelivery)(t.latitude,t.longitude);case 15:return t.delivery=s.sent,s.next=18,(0,l.foodActivity)(t.latitude,t.longitude);case 18:t.activity=s.sent;case 19:case"end":return s.stop()}},s,t)}))()},chooseType:function(t){this.sortBy!==t?this.sortBy=t:this.sortBy=""},chooseCategory:function(t,s,e){0==s?(this.sortBy="",this.foodTitle=this.headTitle=e,this.restaurant_category_ids="",this.restaurant_category_id=this.category[1].id,this.categoryDetail=this.category[1].sub_categories):(this.categoryDetail=this.category[s].sub_categories,this.restaurant_category_id=t)},changeCategoryIds:function(t,s){this.restaurant_category_ids=t,this.sortBy="",this.foodTitle=this.headTitle=s},chooseSortType:function(t){this.sortByType=t.currentTarget.getAttribute("data"),this.sortBy=""},chooseDelivery:function(t){""==this.delivery_mode?(this.delivery_mode=t,this.filterNum++):(this.delivery_mode="",this.filterNum--)},chooseActivity:function(t,s){this.supports_ids[t].status?this.filterNum--:this.filterNum++,this.supports_ids[t].status=!this.supports_ids[t].status},clearSelect:function(){this.filterNum=0,this.delivery_mode="",this.supports_ids.forEach(function(t){t.status=!1})},confirmSelect:function(){this.confirmStatus=!this.confirmStatus,this.sortBy=""}},watch:{sortBy:function(t,s){t?(document.getElementsByTagName("html")[0].className="noScroll",document.body.className="noScroll"):(document.getElementsByTagName("html")[0].className="",document.body.className="")}}}},"4ssL":function(t,s,e){"use strict";var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"food"}},[e("head-top",{attrs:{"go-back":"true","head-title":t.headTitle}}),t._v(" "),e("div",{staticClass:"options",on:{touchmove:function(t){t.preventDefault()}}},[e("div",{staticClass:"item",on:{click:function(s){t.chooseType("food")}}},[e("div",{staticClass:"item_container",class:{chooseType:"food"==t.sortBy}},[e("div",{staticClass:"item_border"},[e("span",{staticClass:"item_title"},[t._v(t._s(t.foodTitle))]),t._v(" "),e("svg",{staticClass:"sort_icon",attrs:{width:"10",height:"10",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[e("polygon",{attrs:{points:"0,3 10,3 5,8"}})])])]),t._v(" "),e("transition",{attrs:{name:"showlist"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"food"==t.sortBy,expression:'sortBy == "food"'}],staticClass:"category"},[e("div",{staticClass:"category_left"},[e("ul",t._l(t.category,function(s,i){return e("li",{key:i,staticClass:"category_left_li",class:{category_active:t.restaurant_category_id===s.id},on:{click:function(e){e.stopPropagation(),t.chooseCategory(s.id,i,s.name)}}},[e("div",[i?e("img",{staticClass:"category_icon",attrs:{src:t.getImgPath(s.image_url)}}):t._e(),t._v(" "),e("span",[t._v(t._s(s.name))])]),t._v(" "),e("div",[i?e("span",{staticClass:"count"},[t._v(t._s(s.count))]):t._e(),t._v(" "),i?e("svg",{staticClass:"category_arrow",attrs:{width:"8",height:"8",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[e("path",{attrs:{d:"M0 0 L6 4 L0 8",stroke:"#bbb","stroke-width":"1",fill:"none"}})]):t._e()])])}))]),t._v(" "),e("div",{staticClass:"category_right"},[e("ul",t._l(t.categoryDetail,function(s,i){return i?e("li",{key:i,staticClass:"category_right_li",class:{category_right_chosen:t.restaurant_category_ids==s.id},on:{click:function(e){e.stopPropagation(),t.changeCategoryIds(s.id,s.name)}}},[e("div",[t._v(t._s(s.name))]),t._v(" "),e("div",[t._v(t._s(s.count))])]):t._e()}))])])])],1),t._v(" "),e("div",{staticClass:"item",on:{click:function(s){t.chooseType("sort")}}},[e("div",{staticClass:"item_container",class:{chooseType:"sort"==t.sortBy}},[e("div",{staticClass:"item_border"},[e("span",{staticClass:"item_title"},[t._v("排序")]),t._v(" "),e("svg",{staticClass:"sort_icon",attrs:{width:"10",height:"10",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[e("polygon",{attrs:{points:"0,3 10,3 5,8"}})])])]),t._v(" "),e("transition",{attrs:{name:"showlist"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"sort"==t.sortBy,expression:'sortBy == "sort"'}],staticClass:"category sort"},[e("ul",[e("li",{staticClass:"sort_li",attrs:{data:"0"},on:{click:function(s){s.stopPropagation(),t.chooseSortType(s)}}},[e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#default"}})]),t._v(" "),e("p",{class:{sort_choose:0==t.sortByType}},[e("span",[t._v("智能排序")]),t._v(" "),0==t.sortByType?e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#selected"}})]):t._e()])]),t._v(" "),e("li",{staticClass:"sort_li",attrs:{data:"5"},on:{click:function(s){s.stopPropagation(),t.chooseSortType(s)}}},[e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#distance"}})]),t._v(" "),e("p",{class:{sort_choose:5==t.sortByType}},[e("span",[t._v("距离最近")]),t._v(" "),5==t.sortByType?e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#selected"}})]):t._e()])]),t._v(" "),e("li",{staticClass:"sort_li",attrs:{data:"6"},on:{click:function(s){s.stopPropagation(),t.chooseSortType(s)}}},[e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#hot"}})]),t._v(" "),e("p",{class:{sort_choose:6==t.sortByType}},[e("span",[t._v("销量最高")]),t._v(" "),6==t.sortByType?e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#selected"}})]):t._e()])]),t._v(" "),e("li",{staticClass:"sort_li",attrs:{data:"1"},on:{click:function(s){s.stopPropagation(),t.chooseSortType(s)}}},[e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#price"}})]),t._v(" "),e("p",{class:{sort_choose:1==t.sortByType}},[e("span",[t._v("起送价最低")]),t._v(" "),1==t.sortByType?e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#selected"}})]):t._e()])]),t._v(" "),e("li",{staticClass:"sort_li",attrs:{data:"2"},on:{click:function(s){s.stopPropagation(),t.chooseSortType(s)}}},[e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#speed"}})]),t._v(" "),e("p",{class:{sort_choose:2==t.sortByType}},[e("span",[t._v("配送速度最快")]),t._v(" "),2==t.sortByType?e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#selected"}})]):t._e()])]),t._v(" "),e("li",{staticClass:"sort_li",attrs:{data:"3"},on:{click:function(s){s.stopPropagation(),t.chooseSortType(s)}}},[e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#rating"}})]),t._v(" "),e("p",{class:{sort_choose:3==t.sortByType}},[e("span",[t._v("评分最高")]),t._v(" "),3==t.sortByType?e("svg",[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#selected"}})]):t._e()])])])])])],1),t._v(" "),e("div",{staticClass:"item",on:{click:function(s){t.chooseType("activity")}}},[e("div",{staticClass:"item_container",class:{chooseType:"activity"==this.sortBy}},[e("span",{staticClass:"item_title"},[t._v("筛选")]),t._v(" "),e("svg",{staticClass:"sort_icon",attrs:{width:"10",height:"10",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[e("polygon",{attrs:{points:"0,3 10,3 5,8"}})])]),t._v(" "),e("transition",{attrs:{name:"showlist"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"activity"==this.sortBy,expression:'this.sortBy == "activity"'}],staticClass:"activity category"},[e("p",{staticClass:"title"},[t._v("配送方式")]),t._v(" "),e("ul",t._l(t.delivery,function(s,i){return e("li",{key:i,staticClass:"activity_li",on:{click:function(e){e.stopPropagation(),t.chooseDelivery(s.id)}}},[e("svg",[e("use",{attrs:{"xlink:href":t.delivery_mode==s.id?"#selected":"#fengniao"}})]),t._v(" "),e("span",{class:{active:t.delivery_mode==s.id}},[t._v(t._s(s.text))])])})),t._v(" "),e("p",{staticClass:"title"},[t._v("商家属性（可以多选）")]),t._v(" "),e("ul",t._l(t.activity,function(s,i){return e("li",{key:i,staticClass:"activity_li",on:{click:function(e){e.stopPropagation(),t.chooseActivity(i,s.id)}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:!t.supports_ids[i].status,expression:"!supports_ids[index].status"}],staticClass:"icon",style:{color:"#"+s.icon_color,borderColor:"#"+s.icon_color}},[t._v("\n                                    "+t._s(s.icon_name)+"\n                                ")]),t._v(" "),e("svg",{directives:[{name:"show",rawName:"v-show",value:t.supports_ids[i].status,expression:"supports_ids[index].status"}],staticClass:"activity_svg"},[e("use",{attrs:{"xlink:href":"#selected"}})]),t._v(" "),e("span",{class:{active:t.supports_ids[i].status}},[t._v(t._s(s.name))])])})),t._v(" "),e("div",{staticClass:"btns"},[e("div",{staticClass:"btn",on:{click:function(s){return s.stopPropagation(),t.clearSelect(s)}}},[t._v("清空")]),t._v(" "),e("div",{staticClass:"btn ensure",on:{click:function(s){return s.stopPropagation(),t.confirmSelect(s)}}},[e("span",[t._v("确定")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.filterNum,expression:"filterNum"}]},[t._v("("+t._s(t.filterNum)+")")])])])])])],1)]),t._v(" "),e("shop-list",{attrs:{restaurantCategoryId:t.restaurant_category_id,restaurantCategoryIds:t.restaurant_category_ids,sortByType:t.sortByType,deliveryMode:t.delivery_mode,supportsIds:t.supports_ids,confirmStatus:t.confirmStatus}}),t._v(" "),e("transition",{attrs:{name:"showcover"}},[t.sortBy?e("div",{staticClass:"cover"}):t._e()])],1)},staticRenderFns:[]};s.a=i},D0TU:function(t,s){},DBs8:function(t,s,e){"use strict";var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shoplist"},[t.shoplist.length?e("ul",{staticClass:"shop_ul"},t._l(t.shoplist,function(s,i){return e("router-link",{key:i,staticClass:"shop_li",attrs:{to:{path:"/shop",query:{geohash:t.geohash,id:s.id}},tag:"li"}},[e("div",{staticClass:"avator"},[e("img",{staticClass:"shop_img",attrs:{src:t.imgBaseUrl+s.image_path}})]),t._v(" "),e("div",{staticClass:"detail"},[e("div",{staticClass:"top"},[e("h4",{staticClass:"ellipsis",class:{premium:s.is_premium}},[t._v(t._s(s.name))]),t._v(" "),e("ul",{staticClass:"support_ul"},t._l(s.supports,function(s,i){return e("li",{key:i,staticClass:"support_li"},[t._v("\n                            "+t._s(s.icon_name)+"\n                        ")])}))]),t._v(" "),e("div",{staticClass:"middle"},[e("div",{staticClass:"left"},[e("star",{attrs:{score:s.rating}}),t._v(" "),e("span",{staticClass:"score"},[t._v(t._s(s.rating))]),t._v(" "),e("div",{staticClass:"sell"},[t._v("月售"+t._s(s.recent_order_num)+"单")])],1),t._v(" "),e("div",{staticClass:"right"},[s.delivery_mode?e("span",{staticClass:"delivery"},[t._v(t._s(s.delivery_mode.text))]):t._e(),t._v(" "),t.intime(s.supports)?e("span",{staticClass:"intime"},[t._v("准时达")]):t._e()])]),t._v(" "),e("div",{staticClass:"bottom"},[e("div",{staticClass:"left"},[t._v("￥"+t._s(s.float_minimum_order_amount)+"起送/"+t._s(s.piecewise_agent_fee.tips)+" ")]),t._v(" "),e("div",{staticClass:"right"},[e("span",{staticClass:"distance"},[t._v(t._s(s.distance)+"/")]),t._v(" "),e("span",{staticClass:"time"},[t._v(t._s(s.order_lead_time))])])])])])})):t._e(),t._v(" "),e("div",{staticClass:"no_more"},[t._v("没有更多了")])])},staticRenderFns:[]};s.a=i},"RA/b":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("Vai1"),a=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(s,t,function(){return i[t]})}(o);var r=e("DBs8");var n=function(t){e("/CM7")},c=e("VU/8")(a.a,r.a,!1,n,"data-v-6b5752ba",null);s.default=c.exports},Vai1:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=u(e("Xxa5")),a=u(e("exGp")),o=u(e("Dd8w")),r=e("i84Q"),n=e("uaSg"),c=e("NYxO"),l=u(e("f194"));function u(t){return t&&t.__esModule?t:{default:t}}s.default={data:function(){return{shoplist:[],imgBaseUrl:n.imgBaseUrl}},created:function(){this.init()},props:["geohash","restaurantCategoryId","restaurantCategoryIds","sortByType","deliveryMode","supportsIds","confirmStatus"],components:{star:l.default},computed:(0,o.default)({},(0,c.mapState)(["longitude","latitude"])),methods:{init:function(){var t=this;return(0,a.default)(i.default.mark(function s(){var e;return i.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,r.shopList)(t.latitude,t.longitude,t.restaurantCategoryId,t.restaurantCategoryIds,t.sortByType,t.deliveryMode,t.supportsIds);case 2:e=s.sent,t.shoplist=e;case 4:case"end":return s.stop()}},s,t)}))()},intime:function(t){var s=!1;return t instanceof Array&&t.length&&t.forEach(function(t){"准"===t.icon_name&&(s=!0)}),s}},watch:{longitude:function(t){console.log(1),this.init()},restaurantCategoryIds:function(t){this.init()},sortByType:function(t){this.init()},confirmStatus:function(t){this.init()}}}},fHOz:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("1HZs"),a=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(s,t,function(){return i[t]})}(o);var r=e("4ssL");var n=function(t){e("D0TU")},c=e("VU/8")(a.a,r.a,!1,n,"data-v-8fcb00c8",null);s.default=c.exports},we8T:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.getImgPath={methods:{getImgPath:function(t){if(!t)return"//elm.cangdu.org/img/default.jpg";var s=void 0;return s=-1!==t.indexOf("jpeg")?".jpeg":".png","https://fuss10.elemecdn.com"+("/"+t.substr(0,1)+"/"+t.substr(1,2)+"/"+t.substr(3)+s)}}}}});
//# sourceMappingURL=4.30aa54163295d0911f16.js.map